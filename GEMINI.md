# AI Agent Workflow Rules (GEMINI.md)

このファイルは、本プロジェクトにおいてAIアシスタント（エージェント）が遵守すべき絶対的なルールを定義したものです。

## 1. IssueとPull Request、マージに関する厳格なルール

**【重大事象の防止】**
コードの修正後、ユーザーの「確認テスト」を待たずに、勝手にPull Requestを作成したり、`main` ブランチへマージしたり、Issueをクローズしてはなりません。

**【正しいワークフロー】**
1. コード修正とローカルビルド・プロセスの再起動が完了したら、ユーザーに対して**「修正内容の説明」と「動作確認（テスト）のお願い」**を通知して処理を停止（待機）すること。
2. ユーザーが手元で動作を確認し、「OK」「直った」「マージしてよい」などと**明示的にテスト完了・同意の意思を返答してきた場合のみ**、コミット、Push、PRの作成、およびマージ作業に進むこと。
3. もし追加の不具合や「まだ直っていない」というフィードバックが得られた場合は、PR作成には進まずに追加の修正作業へ移行すること。

このルールはいかなる状況・タスクにおいても最優先で適用されます。

## 2. エラー対応とループ防止に関するルール

**【エラー発生時の状況説明と判断の仰ぎ方】**
1. エラー対応を行う際、同じエラーや類似の事象で対応がループ（堂々巡り）している兆候を検知した場合は、**即座に自動でのコマンド実行やトライ＆エラーを停止**すること。
2. 停止後、ユーザーに対して現在の状況、試したこと、推測される原因を**必ず日本語で分かりやすく説明**すること。
3. その上で、ユーザーに今後の進め方（別の手段の提案や、ユーザー側での環境確認など）の**判断を仰ぐこと**。ユーザーの指示なしに同じ方針での修正・再実行を強行してはならない。
